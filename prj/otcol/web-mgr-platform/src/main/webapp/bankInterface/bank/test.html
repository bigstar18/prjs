<html>
  <head>
	<title>创建凭证</title>
	<link rel="stylesheet" href="../skin/default/css/style.css" type="text/css"/>
	<script language="javascript" src="../lib/tools.js"></script>
	<script>
		function initData(){
			//初始化行的克隆，并增加一行，默认一借一贷。
			trClone = document.all.tableList.children[1].children[0].cloneNode(true);
			//addEntry();
		}
	
		function kd(nxtobjid)
		{
			var nxtobjid=nxtobjid;
			var nxtobj=document.getElementById(nxtobjid);
			var keycode=event.keyCode;
			//alert(event.keyCode);
			if (keycode==13)
			{nxtobj.focus();
			}
		}
		//用于增加分录的tr，增加时克隆一个。
	    var trClone = null;
		
		function voucherSubmit()
		{
			if(!checkValue("formNew"))
				return false;
		}
		
		function addEntry()
		{
			var tabBody = document.all.tableList.children[1];
			var tr = trClone.cloneNode(true);
			tabBody.appendChild(tr);
		}
		
		function delEntry()
		{
		  var tabBody = document.all.tableList.children[1];
		  for(i=tabBody.children.length-1; i>=0; i--)
		  {
			if(tabBody.children[i].children[1].children[0].checked)
			{
				tabBody.children[i].removeNode(true);
			}			
		  }
	    }

	</script> 
</head>
<body onload="initData();">
        <form id="formNew" action="" method="POST" targetType="hidden">
		<table id="tableList" border="0" cellspacing="0" cellpadding="0" width="100%" height="350">
	  		<tHead>
	  			<tr height="25">
	  				<td class="panel_tHead_LB">&nbsp;</td>
					<td class="panel_tHead_MB"><input type="checkbox" id="checkAll" onclick="selectAll(tableList,'entryId_check')"></td>
					<td class="panel_tHead_MB">起始</td>
					<td class="panel_tHead_MB">结束</td>
					<td class="panel_tHead_MB">类型</td>
					<td class="panel_tHead_MB">费用</td>
					<td class="panel_tHead_MB">最低</td>
					<td class="panel_tHead_MB">最高</td>
					<td class="panel_tHead_RB">&nbsp;</td>
				</tr>
			</tHead>
			<tBody>
		  		<tr onclick="selectTr();">
		  			<td class="panel_tBody_LB">&nbsp;</td>
		  			<td class="underLine"><input name="entryId_check" type="checkbox" onkeydown="if(event.keyCode==13)event.keyCode=9"><input name="entryId" type="hidden"></td>
		  			<td class="underLine"><input name="downLimit" type="text" class="text" style="width: 100px;" reqfv = "req_num;1;0;起始" value="0"  onkeydown="if(event.keyCode==13)event.keyCode=9"></td>
		  			<td class="underLine"><input name="upLimit" type="text" class="text" style="width: 100px;" reqfv = "req_num;1;0;结束" value="0"  onkeydown="if(event.keyCode==13)event.keyCode=9"></td>
					<td align="left">
						<select name="tMode" class="normal" style="width: 80px">
							<option value="0">百分比</option>
              				<option value="1">绝对值</option>
						</select>
					</td>
		  			<td class="underLine"><input name="rate" type="text" class="text" style="width: 100px;" reqfv = "req_num;1;0;费用" value="0"  onkeydown="if(event.keyCode==13)event.keyCode=9"></td>
		  			<td class="underLine"><input name="minRateValue" type="text" class="text" style="width: 100px;" reqfv = "req_num;1;0;最低" value="0"  onkeydown="if(event.keyCode==13)event.keyCode=9"></td>
					<td class="underLine"><input name="maxRateValue" type="text" class="text" style="width: 100px;" reqfv = "req_num;1;0;最高" value="0"  onkeydown="if(event.keyCode==13)event.keyCode=9"></td>
		  			<td class="panel_tBody_RB">&nbsp;</td>
		  		</tr>
		  	</tBody>
		  	<tFoot>
				<tr height="100%">
					<td class="panel_tBody_LB">&nbsp;</td>
					<td colspan="7">&nbsp;</td>
					<td class="panel_tBody_RB">&nbsp;</td>
				</tr>
				<tr height="22">
					<td class="panel_tBody_LB">&nbsp;</td>
					<td colspan="7" align="right" class="pager"><button class="smlbtn" type="button" onclick="addEntry();" onkeydown="if(event.keyCode==13)event.keyCode=9">增加分录</button>&nbsp;&nbsp;
  			  <button class="smlbtn" type="button" onclick="delEntry();" onkeydown="if(event.keyCode==13)event.keyCode=9">删除分录</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <button id="submitBtn" class="smlbtn" type="button" onclick="this.disabled=true;if(!voucherSubmit()) this.disabled=false;" onkeydown="kd('entrySummary')">提交</button></td>
					<td class="panel_tBody_RB">&nbsp;</td>
				</tr>
				<tr height="22">
					<td class="panel_tFoot_LB">&nbsp;</td>
					<td class="panel_tFoot_MB" colspan="7"></td>
					<td class="panel_tFoot_RB">&nbsp;</td>
				</tr>
			</tFoot>
		</table>
     </form>
</body>
</html>